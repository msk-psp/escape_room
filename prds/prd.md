### **1. 개요 (Overview)**

*   **프로덕트명:** (가칭) 방탈출의 모든 것 (Escape Everything)
*   **목표:** 대한민국 전역의 방탈출 카페와 테마 정보를 통합하여 사용자에게 제공하고, 취향에 맞는 테마를 쉽고 빠르게 찾을 수 있도록 돕는 웹 서비스 구축.

### **2. 목표 사용자 (Target Audience)**

*   **방탈출 초심자:** 방탈출에 입문하려는 사용자로, 쉽고 인기 있는 테마를 추천받고 싶어 함.
*   **방탈출 애호가:** 특정 장르(공포, 추리 등)나 난이도의 테마를 적극적으로 찾아다니는 사용자.
*   **친구/커플/가족:** 함께 즐길만한 활동을 찾는 그룹으로, 지역, 인원수, 장르를 기준으로 검색.

### **3. 주요 기능 명세 (Detailed Functional Requirements)**

#### **3.1. 프론트엔드 (Frontend)**

*   **메인 페이지**
    *   핵심 기능인 검색창을 중앙에 배치.
    *   '인기 테마 TOP 10', '이번 주 신규 테마', '지역별 추천 카페' 등 사용자의 흥미를 유발할 수 있는 콘텐츠 섹션 구성.
    *   주요 지역(홍대, 강남, 건대 등) 바로가기 버튼 제공.

*   **검색 및 필터링 페이지**
    *   **검색 기능:** 카페명, 테마명으로 검색 가능.
    *   **필터링 조건:**
        *   **지역:** 시/도, 시/군/구 단위 선택 (다중 선택 가능).
        *   **장르:** 공포, 스릴러, 추리, 판타지, SF, 감성 등 (다중 선택 가능).
        *   **난이도:** 1~5단계 슬라이더 또는 버튼 형식.
        *   **추천 인원:** 2인, 3~4인, 5인 이상 등.
        *   **평점:** 1~5점 슬라이더 또는 버튼 형식.
    *   **결과 표시:** 리스트 뷰와 지도 뷰 전환 기능 제공.

*   **카페/테마 상세 페이지**
    *   **기본 정보:**
        *   카페명, 주소(지도 연동), 연락처, 공식 홈페이지 링크.
        *   해당 카페가 보유한 전체 테마 목록.
    *   **테마 상세 정보:**
        *   테마 포스터 이미지.
        *   장르, 난이도, 추천 인원, 플레이 시간, 가격.
        *   테마 스토리 및 소개.
        *   사용자 평점 및 리뷰.
    *   **리뷰 기능:** 사용자가 직접 별점과 코멘트를 남길 수 있는 기능 (로그인 사용자 한정).

*   **지도 뷰**
    *   검색/필터링된 결과를 지도 위에 핀으로 표시.
    *   핀 클릭 시 카페명, 평점 등 요약 정보가 담긴 인포윈도우 표시.
    *   인포윈도우 클릭 시 해당 카페 상세 페이지로 이동.

#### **3.2. 백엔드 (Backend)**

*   **API 설계 (RESTful API)**
    *   `GET /cafes`: 조건(지역, 이름 등)에 맞는 카페 목록 조회.
    *   `GET /cafes/{id}`: 특정 카페의 상세 정보 조회.
    *   `GET /themes`: 조건(장르, 난이도 등)에 맞는 테마 목록 조회.
    *   `GET /themes/{id}`: 특정 테마의 상세 정보 조회.
    *   `POST /themes/{id}/reviews`: 특정 테마에 리뷰 작성 (인증 필요).
    *   `GET /themes/{id}/reviews`: 특정 테마의 리뷰 목록 조회.

*   **데이터 수집 (크롤링/스크레이핑)**
    *   **대상:** 네이버 지도, 카카오 지도, 각 방탈출 카페 공식 홈페이지.
    *   **수집 주기:** 주 1회 또는 월 1회 주기적인 스케줄링 실행 (e.g., Cron Job).
    *   **수집 데이터:**
        *   (지도 앱) 카페명, 주소, 좌표, 연락처, 평점.
        *   (공식 홈페이지) 테마명, 장르, 스토리, 난이도, 추천 인원, 가격 등 상세 정보.
    *   **구현:** Python(BeautifulSoup, Scrapy) 또는 Node.js(Puppeteer, Cheerio) 활용.
    *   **주의사항:** 대상 웹사이트의 구조 변경, IP 차단 등에 대응할 수 있는 로직 필요.

*   **데이터 관리**
    *   수집된 데이터의 정제(Cleaning) 및 중복 제거.
    *   카페/테마 정보의 생성, 수정, 삭제를 위한 관리자 페이지(Admin Panel) 기능.

#### **3.3. 데이터베이스 (Database)**

*   **데이터베이스 스키마 제안**
    *   **`cafes` 테이블:** `id` (PK), `name`, `address`, `phone_number`, `website_url`, `latitude`, `longitude`, `created_at`, `updated_at`
    *   **`themes` 테이블:** `id` (PK), `cafe_id` (FK), `name`, `genre`, `description`, `difficulty`, `recommended_players`, `play_time`, `price`, `poster_image_url`, `created_at`, `updated_at`
    *   **`reviews` 테이블:** `id` (PK), `theme_id` (FK), `user_id` (FK), `rating` (1~5), `comment`, `created_at`
    *   **`users` 테이블 (선택적 기능):** `id` (PK), `email`, `password`, `nickname`, `created_at`

### **4. 비기능적 요구사항 (Non-Functional Requirements)**

*   **성능:** 페이지 로딩 시간 3초 이내, 검색 결과 응답 시간 1초 이내.
*   **확장성:** 향후 사용자 및 데이터 증가에 유연하게 대응할 수 있는 구조.
*   **안정성:** 크롤러가 특정 사이트에서 실패하더라도 전체 시스템에 영향을 주지 않아야 함. 99.5% 이상의 서비스 가동 시간 목표.
*   **사용성:** 모바일 우선(Mobile-First) 접근 방식으로 반응형 웹 디자인 적용.

### **5. 기술 스택 제안 (Technology Stack Suggestions)**

*   **프론트엔드:** React (with Bun)
*   **백엔드:** Python (FastAPI)
*   **데이터베이스:** PostgreSQL (PostGIS 확장 기능으로 위치 기반 검색에 유리), MySQL
*   **데이터 수집:** Python (Scrapy, BeautifulSoup), Node.js (Puppeteer)
*   **검색 엔진 (선택):** Elasticsearch (대규모 데이터의 빠르고 정확한 검색을 위해)
*   **배포:** AWS, Google Cloud Platform, Vercel (프론트엔드)
